<!-- energy-heatmap.html -->
<div id="eh2-root" data-theme="light">
  <div class="eh-card">
    <!-- Header -->
    <div id="eh2-header" class="eh-header">
      <div class="eh-btn-group" id="eh2-range-group">
        <button class="eh-btn eh-btn--chip" data-range="1d">Last 24 Hours</button>
        <button class="eh-btn eh-btn--chip active" data-range="1w">Last 7 Days</button>
        <button class="eh-btn eh-btn--chip" data-range="1m">Last 30 Days</button>
        <button class="eh-btn eh-btn--chip" data-range="custom">Custom</button>
      </div>

      <div class="eh-btn-group" id="eh2-hour-mode-group">
        <button class="eh-btn eh-btn--chip active" id="eh2-hour-toggle" data-hour-mode="10h">
          <span class="eh-btn-text">Business Hours</span>
          <svg class="eh-switch-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M16 3L20 7L16 11M20 7H4M8 21L4 17L8 13M4 17H20" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>

      <!-- Key Selector -->
      <!-- Key Selector (Custom Dropdown) -->
      <div id="eh2-key-wrap" class="eh-key-wrap" style="display:none;">
        <span class="eh-label">Type:</span>
        <div class="eh-dropdown">
          <button id="eh2-key-trigger" class="eh-dropdown-trigger">
            <span id="eh2-key-label">Select</span>
            <svg class="eh-arrow" width="10" height="6" viewBox="0 0 10 6" fill="none">
              <path d="M1 1L5 5L9 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </button>
          <div id="eh2-key-menu" class="eh-dropdown-menu"></div>
        </div>
      </div>
    </div>

    <!-- Canvas -->
    <div class="eh-scroll-wrap">
      <canvas id="eh2-canvas" class="eh-canvas" aria-label="Energy heatmap"></canvas>
    </div>

    <div id="eh2-legend" class="eh-legend"></div>
    <div id="eh2-tooltip" class="eh-tooltip" style="display:none"></div>
  </div>
</div>

<!-- ===== Custom Range Modal (2 calendars) ===== -->
<div id="eh2-range-overlay" class="eh2-modal-overlay" style="display:none;">
  <div class="eh2-modal">
    <div class="eh2-modal-head">
      <div class="title">Select time interval</div>
      <button class="eh2-iconbtn" id="eh2-close" aria-label="Close">✕</button>
    </div>

    <div class="eh2-modal-body">
      <div class="eh2-cal-wrap">
        <!-- Left month -->
        <div class="eh2-cal">
          <div class="eh2-cal-head">
            <button class="eh2-iconbtn" id="eh2-prevL" aria-label="Prev month">‹</button>
            <div class="title" id="eh2-titleL"></div>
            <button class="eh2-iconbtn" id="eh2-nextL" aria-label="Next month">›</button>
          </div>
          <div class="eh2-week">
            <div>Mo</div>
            <div>Tu</div>
            <div>We</div>
            <div>Th</div>
            <div>Fr</div>
            <div>Sa</div>
            <div>Su</div>
          </div>
          <div class="eh2-grid" id="eh2-gridL"></div>
        </div>

        <!-- Right month -->
        <div class="eh2-cal">
          <div class="eh2-cal-head">
            <button class="eh2-iconbtn" id="eh2-prevR" aria-label="Prev month">‹</button>
            <div class="title" id="eh2-titleR"></div>
            <button class="eh2-iconbtn" id="eh2-nextR" aria-label="Next month">›</button>
          </div>
          <div class="eh2-week">
            <div>Mo</div>
            <div>Tu</div>
            <div>We</div>
            <div>Th</div>
            <div>Fr</div>
            <div>Sa</div>
            <div>Su</div>
          </div>
          <div class="eh2-grid" id="eh2-gridR"></div>
        </div>
      </div>

      <!-- Quick actions -->
      <div class="eh2-quick">
        <span>Quick Choice</span>
        <button id="eh2-week-cur" class="eh2-btn ghost">Current Week</button>
        <button id="eh2-month-cur" class="eh2-btn ghost">Current Month</button>
      </div>
    </div>

    <div class="eh2-modal-actions">
      <button class="eh2-btn" id="eh2-cancel" type="button">Cancel</button>
      <button class="eh2-btn primary" id="eh2-apply" type="button">Apply</button>
    </div>
  </div>
</div>